/* 
 * Boxer v3.3.0 - 2014-10-28 
 * A jQuery plugin for displaying images, videos or content in a modal overlay. Part of the Formstone Library. 
 * http://formstone.it/boxer/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */

!function(a,b){"use strict";function c(c){return xb.formatter=j,J=a(b),K=a("body"),H=F(),a(this).on(pb,a.extend({},xb,c||{}),d)}function d(b){if(!N){var c=a(this),d=b.data.$object,f=c[0].href?c[0].href||"":"",g=c[0].hash?c[0].hash||"":"",i=f.toLowerCase().split(".").pop().split(/\#|\?/),j=i[0],l=c.data("boxer-type")||"",m="image"===l||a.inArray(j,b.data.extensions)>-1||"data:image"===f.substr(0,10),o=f.indexOf("youtube.com/embed")>-1||f.indexOf("player.vimeo.com/video")>-1,p="url"===l||!m&&!o&&"http"===f.substr(0,4)&&!g,w="element"===l||!m&&!o&&!p&&"#"===g.substr(0,1),x="undefined"!=typeof d;if(w&&(f=g),!(m||o||p||w||x))return;if(C(b),N=a.extend({},{$target:c,$object:d,visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:L||b.data.mobile,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},b.data),N.margin*=2,N.type=m?"image":o?"video":"element",m||o){var y=N.$target.data("gallery")||N.$target.attr("rel");y&&(N.gallery.active=!0,N.gallery.id=y,N.gallery.$items=a("a[data-gallery= "+N.gallery.id+"], a[rel= "+N.gallery.id+"]"),N.gallery.index=N.gallery.$items.index(N.$target),N.gallery.total=N.gallery.$items.length-1)}var z="";if(N.isMobile||(z+='<div class="'+[O,N.customClass].join(" ")+'"></div>'),z+='<div class="'+[P,gb,hb,N.customClass].join(" "),N.fixed&&(z+=ib),N.isMobile&&(z+=jb),p&&(z+=lb),(w||x)&&(z+=kb),z+='">',z+='<span class="'+Q+'">'+N.labels.close+"</span>",z+='<span class="'+R+'"></span>',z+='<div class="'+S+'">',z+='<div class="'+T+'">',(m||o)&&(z+='<div class="'+X+'">',N.gallery.active?(z+='<div class="'+[Y,Z].join(" ")+'">'+N.labels.previous+"</div>",z+='<div class="'+[Y,$].join(" ")+'">'+N.labels.next+"</div>",z+='<p class="'+ab+'"',N.gallery.total<1&&(z+=' style="display: none;"'),z+=">",z+='<span class="'+bb+'">'+(N.gallery.index+1)+"</span> ",z+=N.labels.count,z+=' <span class="'+cb+'">'+(N.gallery.total+1)+"</span>",z+="</p>",z+='<div class="'+[db,eb].join(" ")+'">'):z+='<div class="'+db+'">',z+=N.formatter.apply(J,[N.$target]),z+="</div></div>"),z+="</div></div></div>",K.append(z),N.$overlay=a(G(O)),N.$boxer=a(G(P)),N.$close=N.$boxer.find(G(Q)),N.$container=N.$boxer.find(G(S)),N.$content=N.$boxer.find(G(T)),N.$meta=N.$boxer.find(G(X)),N.$position=N.$boxer.find(G(ab)),N.$caption=N.$boxer.find(G(db)),N.$controls=N.$boxer.find(G(Y)),N.paddingVertical=N.isMobile?N.$close.outerHeight()/2:parseInt(N.$boxer.css("paddingTop"),10)+parseInt(N.$boxer.css("paddingBottom"),10),N.paddingHorizontal=N.isMobile?0:parseInt(N.$boxer.css("paddingLeft"),10)+parseInt(N.$boxer.css("paddingRight"),10),N.contentHeight=N.$boxer.outerHeight()-N.paddingVertical,N.contentWidth=N.$boxer.outerWidth()-N.paddingHorizontal,N.controlHeight=N.$controls.outerHeight(),h(),N.gallery.active&&r(),J.on(rb,yb.resize).on(qb,s),K.on(wb,[G(O),G(Q)].join(", "),e).on(ub,C),N.gallery.active&&N.$boxer.on(wb,G(Y),q),N.$boxer.on(H,function(b){C(b),a(b.target).is(N.$boxer)&&(N.$boxer.off(H),m?k(f):o?n(f):p?u(f):w?t(f):x?v(N.$object):a.error("BOXER: '"+f+"' is not valid."))}),K.addClass(mb),M||N.$boxer.trigger(H),x)return N.$boxer}}function e(b){C(b),N&&(N.$boxer.on(H,function(b){C(b),a(b.target).is(N.$boxer)&&(N.$boxer.off(G(I)),N.$container.off(G(I)),J.off(G(I)),K.off(G(I)),N.$overlay.remove(),N.$boxer.remove(),N=null,J.trigger(nb))}).addClass(hb),K.removeClass(mb),M||N.$boxer.trigger(H),E(N.resizeTimer))}function f(){{var b=i();N.isMobile?0:N.duration}N.isMobile||N.$controls.css({marginTop:(N.contentHeight-N.controlHeight-N.metaHeight)/2}),!N.visible&&N.isMobile&&N.gallery.active&&N.$content.on(tb,G(U),y),(N.isMobile||N.fixed)&&K.addClass(mb),N.$boxer.on(H,function(b){C(b),a(b.target).is(N.$boxer)&&(N.$boxer.off(H),N.$container.on(H,function(b){C(b),a(b.target).is(N.$container)&&(N.$container.off(H),N.$boxer.removeClass(hb),N.isAnimating=!1)}),N.$boxer.removeClass(gb),M||N.$content.trigger(H),N.visible=!0,N.callback.apply(N.$boxer),J.trigger(ob),N.gallery.active&&p())}),N.isMobile||N.$boxer.css({height:N.contentHeight+N.paddingVertical,width:N.contentWidth+N.paddingHorizontal,top:N.fixed?0:b.top});var c=N.oldContentHeight!==N.contentHeight||N.oldContentWidth!==N.contentWidth;!N.isMobile&&M&&c||N.$boxer.trigger(H),N.oldContentHeight=N.contentHeight,N.oldContentWidth=N.contentWidth}function g(){if(N.visible&&!N.isMobile){var a=i();N.$controls.css({marginTop:(N.contentHeight-N.controlHeight-N.metaHeight)/2}),N.$boxer.css({height:N.contentHeight+N.paddingVertical,width:N.contentWidth+N.paddingHorizontal,top:N.fixed?0:a.top})}}function h(){var a=i();N.$boxer.css({top:N.fixed?0:a.top})}function i(){if(N.isMobile)return{left:0,top:0};var a={left:(J.width()-N.contentWidth-N.paddingHorizontal)/2,top:N.top<=0?(J.height()-N.contentHeight-N.paddingVertical)/2:N.top};return N.fixed!==!0&&(a.top+=J.scrollTop()),a}function j(a){var b=a.attr("title");return void 0!==b&&""!==b.trim()?'<p class="caption">'+b.trim()+"</p>":""}function k(b){N.$image=a("<img>"),N.$image.on(sb,function(){N.$image.off(G(I));var a=B(N.$image);N.naturalHeight=a.naturalHeight,N.naturalWidth=a.naturalWidth,N.retina&&(N.naturalHeight/=2,N.naturalWidth/=2),N.$content.prepend(N.$image),""===N.$caption.html()?N.$caption.hide():N.$caption.show(),l(),f()}).error(x).attr("src",b).addClass(U),(N.$image[0].complete||4===N.$image[0].readyState)&&N.$image.trigger(sb)}function l(){var a=0;for(N.windowHeight=N.viewportHeight=J.height()-N.paddingVertical,N.windowWidth=N.viewportWidth=J.width()-N.paddingHorizontal,N.contentHeight=1/0,N.contentWidth=1/0,N.imageMarginTop=0,N.imageMarginLeft=0;N.contentHeight>N.viewportHeight&&2>a;)N.imageHeight=0===a?N.naturalHeight:N.$image.outerHeight(),N.imageWidth=0===a?N.naturalWidth:N.$image.outerWidth(),N.metaHeight=0===a?0:N.metaHeight,0===a&&(N.ratioHorizontal=N.imageHeight/N.imageWidth,N.ratioVertical=N.imageWidth/N.imageHeight,N.isWide=N.imageWidth>N.imageHeight),N.imageHeight<N.minHeight&&(N.minHeight=N.imageHeight),N.imageWidth<N.minWidth&&(N.minWidth=N.imageWidth),N.isMobile?(N.$meta.css({width:N.windowWidth}),N.metaHeight=N.$meta.outerHeight(!0),N.contentHeight=N.viewportHeight-N.paddingVertical,N.contentWidth=N.viewportWidth-N.paddingHorizontal,m(),N.imageMarginTop=(N.contentHeight-N.targetImageHeight-N.metaHeight)/2,N.imageMarginLeft=(N.contentWidth-N.targetImageWidth)/2):(0===a&&(N.viewportHeight-=N.margin+N.paddingVertical,N.viewportWidth-=N.margin+N.paddingHorizontal),N.viewportHeight-=N.metaHeight,m(),N.contentHeight=N.targetImageHeight,N.contentWidth=N.targetImageWidth),N.$meta.css({width:N.contentWidth}),N.$image.css({height:N.targetImageHeight,width:N.targetImageWidth,marginTop:N.imageMarginTop,marginLeft:N.imageMarginLeft}),N.isMobile||(N.metaHeight=N.$meta.outerHeight(!0),N.contentHeight+=N.metaHeight),a++}function m(){var a=N.isMobile?N.contentHeight-N.metaHeight:N.viewportHeight,b=N.isMobile?N.contentWidth:N.viewportWidth;N.isWide?(N.targetImageWidth=b,N.targetImageHeight=N.targetImageWidth*N.ratioHorizontal,N.targetImageHeight>a&&(N.targetImageHeight=a,N.targetImageWidth=N.targetImageHeight*N.ratioVertical)):(N.targetImageHeight=a,N.targetImageWidth=N.targetImageHeight*N.ratioVertical,N.targetImageWidth>b&&(N.targetImageWidth=b,N.targetImageHeight=N.targetImageWidth*N.ratioHorizontal)),(N.targetImageWidth>N.imageWidth||N.targetImageHeight>N.imageHeight)&&(N.targetImageHeight=N.imageHeight,N.targetImageWidth=N.imageWidth),(N.targetImageWidth<N.minWidth||N.targetImageHeight<N.minHeight)&&(N.targetImageWidth<N.minWidth?(N.targetImageWidth=N.minWidth,N.targetImageHeight=N.targetImageWidth*N.ratioHorizontal):(N.targetImageHeight=N.minHeight,N.targetImageWidth=N.targetImageHeight*N.ratioVertical))}function n(b){N.$videoWrapper=a('<div class="'+W+'"></div>'),N.$video=a('<iframe class="'+V+'" seamless="seamless"></iframe>'),N.$video.attr("src",b).addClass(V).prependTo(N.$videoWrapper),N.$content.prepend(N.$videoWrapper),o(),f()}function o(){N.windowHeight=N.viewportHeight=N.contentHeight=J.height()-N.paddingVertical,N.windowWidth=N.viewportWidth=N.contentWidth=J.width()-N.paddingHorizontal,N.videoMarginTop=0,N.videoMarginLeft=0,N.isMobile?(N.$meta.css({width:N.windowWidth}),N.metaHeight=N.$meta.outerHeight(!0),N.viewportHeight-=N.metaHeight,N.targetVideoWidth=N.viewportWidth,N.targetVideoHeight=N.targetVideoWidth*N.videoRatio,N.targetVideoHeight>N.viewportHeight&&(N.targetVideoHeight=N.viewportHeight,N.targetVideoWidth=N.targetVideoHeight/N.videoRatio),N.videoMarginTop=(N.viewportHeight-N.targetVideoHeight)/2,N.videoMarginLeft=(N.viewportWidth-N.targetVideoWidth)/2):(N.viewportHeight=N.windowHeight-N.margin,N.viewportWidth=N.windowWidth-N.margin,N.targetVideoWidth=N.videoWidth>N.viewportWidth?N.viewportWidth:N.videoWidth,N.targetVideoWidth<N.minWidth&&(N.targetVideoWidth=N.minWidth),N.targetVideoHeight=N.targetVideoWidth*N.videoRatio,N.contentHeight=N.targetVideoHeight,N.contentWidth=N.targetVideoWidth),N.$meta.css({width:N.contentWidth}),N.$videoWrapper.css({height:N.targetVideoHeight,width:N.targetVideoWidth,marginTop:N.videoMarginTop,marginLeft:N.videoMarginLeft}),N.isMobile||(N.metaHeight=N.$meta.outerHeight(!0),N.contentHeight=N.targetVideoHeight+N.metaHeight)}function p(){var b="";N.gallery.index>0&&(b=N.gallery.$items.eq(N.gallery.index-1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">')),N.gallery.index<N.gallery.total&&(b=N.gallery.$items.eq(N.gallery.index+1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">'))}function q(b){C(b);var c=a(b.currentTarget);N.isAnimating||c.hasClass(_)||(N.isAnimating=!0,N.gallery.index+=c.hasClass($)?1:-1,N.gallery.index>N.gallery.total&&(N.gallery.index=N.gallery.total),N.gallery.index<0&&(N.gallery.index=0),N.$container.on(H,function(b){if(C(b),a(b.target).is(N.$container)){N.$container.off(H),"undefined"!=typeof N.$image&&N.$image.remove(),"undefined"!=typeof N.$videoWrapper&&N.$videoWrapper.remove(),N.$target=N.gallery.$items.eq(N.gallery.index),N.$caption.html(N.formatter.apply(K,[N.$target])),N.$position.find(G(bb)).html(N.gallery.index+1);var c=N.$target.attr("href"),d=c.indexOf("youtube.com/embed")>-1||c.indexOf("player.vimeo.com/video")>-1;d?n(c):k(c),r()}}),N.$boxer.addClass([gb,hb].join(" ")),M||N.$content.trigger(H))}function r(){N.$controls.removeClass(_),0===N.gallery.index&&N.$controls.filter(G(Z)).addClass(_),N.gallery.index===N.gallery.total&&N.$controls.filter(G($)).addClass(_)}function s(a){!N.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&N.$close.trigger(pb):(C(a),N.$controls.filter(G(37===a.keyCode?Z:$)).trigger(pb))}function t(b){var c=a(b).find("> :first-child").clone();v(c)}function u(b){b+=b.indexOf("?")>-1?"&"+xb.requestKey+"=true":"?"+xb.requestKey+"=true";var c=a('<iframe class="'+lb+'" src="'+b+'"></iframe>');v(c)}function v(a){N.$content.append(a),w(a),f()}function w(a){N.windowHeight=J.height()-N.paddingVertical,N.windowWidth=J.width()-N.paddingHorizontal,N.objectHeight=a.outerHeight(!0),N.objectWidth=a.outerWidth(!0),N.targetHeight=N.targetHeight||N.$target.data("boxer-height"),N.targetWidth=N.targetWidth||N.$target.data("boxer-width"),N.maxHeight=N.windowHeight<0?xb.minHeight:N.windowHeight,N.isIframe=a.is("iframe"),N.objectMarginTop=0,N.objectMarginLeft=0,N.isMobile||(N.windowHeight-=N.margin,N.windowWidth-=N.margin),N.contentHeight=void 0!==N.targetHeight?N.targetHeight:N.isIframe||N.isMobile?N.windowHeight:N.objectHeight,N.contentWidth=void 0!==N.targetWidth?N.targetWidth:N.isIframe||N.isMobile?N.windowWidth:N.objectWidth,(N.isIframe||N.isObject)&&N.isMobile?(N.contentHeight=N.windowHeight,N.contentWidth=N.windowWidth):N.isObject&&(N.contentHeight=N.contentHeight>N.windowHeight?N.windowHeight:N.contentHeight,N.contentWidth=N.contentWidth>N.windowWidth?N.windowWidth:N.contentWidth)}function x(){var b=a('<div class="'+fb+'"><p>Error Loading Resource</p></div>');N.type="element",N.$meta.remove(),N.$image.off(G(I)),v(b)}function y(a){if(C(a),E(N.touchTimer),!N.isAnimating){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;N.xStart=b?b.pageX:a.clientX,N.leftPosition=0,N.touchMax=1/0,N.touchMin=-1/0,N.edge=.25*N.contentWidth,0===N.gallery.index&&(N.touchMax=0),N.gallery.index===N.gallery.total&&(N.touchMin=0),N.$boxer.on(ub,z).one(vb,A)}}function z(a){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;N.delta=N.xStart-(b?b.pageX:a.clientX),N.delta>20&&C(a),N.canSwipe=!0;var c=-N.delta;c<N.touchMin&&(c=N.touchMin,N.canSwipe=!1),c>N.touchMax&&(c=N.touchMax,N.canSwipe=!1),N.$image.css({transform:"translate3D("+c+"px,0,0)"}),N.touchTimer=D(N.touchTimer,300,function(){A(a)})}function A(a){C(a),E(N.touchTimer),N.$boxer.off([ub,vb].join("")),N.delta&&(N.$boxer.addClass(hb),N.swipe=!1,N.canSwipe&&(N.delta>N.edge||N.delta<-N.edge)?(N.swipe=!0,N.$image.css(N.delta<=N.leftPosition?{transform:"translate3D("+N.contentWidth+"px,0,0)"}:{transform:"translate3D("+-N.contentWidth+"px,0,0)"})):N.$image.css({transform:"translate3D(0,0,0)"}),N.swipe&&N.$controls.filter(G(N.delta<=N.leftPosition?Z:$)).trigger(pb),D(N.resetTimer,N.duration,function(){N.$boxer.removeClass(hb)}))}function B(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function C(a){a.preventDefault&&(a.stopPropagation(),a.preventDefault())}function D(a,b,c){return E(a),setTimeout(c,b)}function E(a){a&&(clearTimeout(a),a=null)}function F(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},b=!1,c=document.createElement("div");for(var d in a)a.hasOwnProperty(d)&&d in c.style&&(b=a[d]);return b||(b="transitionend",M=!1),b+G(I)}function G(a){return"."+a}var H,I="boxer",J=null,K=null,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(b.navigator.userAgent||b.navigator.vendor||b.opera),M=!0,N=null,O=I+"-overlay",P=I,Q=I+"-close",R=I+"-loading-icon",S=I+"-container",T=I+"-content",U=I+"-image",V=I+"-video",W=I+"-video-wrapper",X=I+"-meta",Y=I+"-control",Z=I+"-control-previous",$=I+"-control-next",_=I+"-control-disabled",ab=I+"-position",bb=I+"-position-current",cb=I+"-position-total",db=I+"-caption",eb=I+"-caption-gallery",fb=I+"-error",gb=I+"-loading",hb=I+"-animating",ib=I+"-fixed",jb=I+"-mobile",kb=I+"-inline",lb=I+"-iframe",mb=I+"-open",nb="close."+I,ob="open."+I,pb="click."+I,qb="keydown."+I,rb="resize."+I,sb="load."+I,tb="touchstart."+I,ub="touchmove."+I,vb="touchend."+I,wb=pb+" "+tb,xb={callback:a.noop,customClass:"",extensions:["jpg","sjpg","jpeg","png","gif"],fixed:!1,formatter:a.noop,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,opacity:.75,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600},yb={close:function(){N&&(N.$boxer.off(G(I)),N.$overlay.trigger(pb))},defaults:function(b){return xb=a.extend(xb,b||{}),a(this)},destroy:function(){return a(this).off(G(I))},resize:function(b){return N&&("object"!=typeof b&&(N.targetHeight=arguments[0],N.targetWidth=arguments[1]),"element"===N.type?w(N.$content.find("> :first-child")):"image"===N.type?l():"video"===N.type&&o(),g()),a(this)}};a.fn[I]=function(a){return yb[a]?yb[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a[I]=function(c,e){return yb[c]?yb[c].apply(b,Array.prototype.slice.call(arguments,1)):c instanceof a?d.apply(b,[{data:a.extend({$object:c},xb,e||{})}]):void 0}}(jQuery,window);