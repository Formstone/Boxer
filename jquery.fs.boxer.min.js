/* 
 * Boxer v3.3.0 - 2014-10-28 
 * A jQuery plugin for displaying images, videos or content in a modal overlay. Part of the Formstone Library. 
 * http://formstone.it/boxer/ 
 * 
 * Copyright 2014 Ben Plum; MIT Licensed 
 */

!function(a,b){"use strict";function c(c){return P.formatter=j,I=a(b),J=a("body"),O.transition=F(),a(this).on(O.click,a.extend({},P,c||{}),d)}function d(b){if("undefined"==typeof M.$boxer){var c=a(this),d=b.data.$object,f=c[0].href?c[0].href||"":"",g=c[0].hash?c[0].hash||"":"",i=f.toLowerCase().split(".").pop().split(/\#|\?/),j=i[0],l=c.data("boxer-type")||"",m="image"===l||a.inArray(j,b.data.extensions)>-1||"data:image"===f.substr(0,10),o=f.indexOf("youtube.com/embed")>-1||f.indexOf("player.vimeo.com/video")>-1,p="url"===l||!m&&!o&&"http"===f.substr(0,4)&&!g,w="element"===l||!m&&!o&&!p&&"#"===g.substr(0,1),x="undefined"!=typeof d;if(w&&(f=g),!(m||o||p||w||x))return;if(C(b),M=a.extend({},{$target:c,$object:d,visible:!1,resizeTimer:null,touchTimer:null,gallery:{active:!1},isMobile:K||b.data.mobile,isAnimating:!0,oldContentHeight:0,oldContentWidth:0},b.data),M.margin*=2,M.type=m?"image":o?"video":"element",m||o){var y=M.$target.data("gallery")||M.$target.attr("rel");"undefined"!=typeof y&&y!==!1&&(M.gallery.active=!0,M.gallery.id=y,M.gallery.$items=a("a[data-gallery= "+M.gallery.id+"], a[rel= "+M.gallery.id+"]"),M.gallery.index=M.gallery.$items.index(M.$target),M.gallery.total=M.gallery.$items.length-1)}var z="";if(M.isMobile||(z+='<div class="'+[N.overlay,M.customClass].join(" ")+'"></div>'),z+='<div class="'+[N.base,N.isLoading,N.isAnimating,M.customClass].join(" "),M.fixed&&(z+=N.isFixed),M.isMobile&&(z+=N.isMobile),p&&(z+=N.isIframe),(w||x)&&(z+=N.isInline),z+='">',z+='<span class="'+N.close+'">'+M.labels.close+"</span>",z+='<span class="'+N.loading+'"></span>',z+='<div class="'+N.container+'">',z+='<div class="'+N.content+'">',(m||o)&&(z+='<div class="'+N.meta+'">',M.gallery.active?(z+='<div class="'+[N.control,N.controlPrevious].join(" ")+'">'+M.labels.previous+"</div>",z+='<div class="'+[N.control,N.controlNext].join(" ")+'">'+M.labels.next+"</div>",z+='<p class="'+N.position+'"',M.gallery.total<1&&(z+=' style="display: none;"'),z+=">",z+='<span class="current">'+(M.gallery.index+1)+"</span> "+M.labels.count+' <span class="total">'+(M.gallery.total+1)+"</span>",z+="</p>",z+='<div class="'+[N.caption,N.captionGallery].join(" ")+'">'):z+='<div class="'+N.caption+'">',z+=M.formatter.apply(I,[M.$target]),z+="</div></div>"),z+="</div></div></div>",J.append(z),M.$overlay=a(G(N.overlay)),M.$boxer=a(G(N.base)),M.$close=M.$boxer.find(G(N.close)),M.$container=M.$boxer.find(G(N.container)),M.$content=M.$boxer.find(G(N.content)),M.$meta=M.$boxer.find(G(N.meta)),M.$position=M.$boxer.find(G(N.position)),M.$caption=M.$boxer.find(G(N.caption)),M.$controls=M.$boxer.find(G(N.control)),M.paddingVertical=M.isMobile?M.$close.outerHeight()/2:parseInt(M.$boxer.css("paddingTop"),10)+parseInt(M.$boxer.css("paddingBottom"),10),M.paddingHorizontal=M.isMobile?0:parseInt(M.$boxer.css("paddingLeft"),10)+parseInt(M.$boxer.css("paddingRight"),10),M.contentHeight=M.$boxer.outerHeight()-M.paddingVertical,M.contentWidth=M.$boxer.outerWidth()-M.paddingHorizontal,M.controlHeight=M.$controls.outerHeight(),h(),M.gallery.active&&r(),I.on(O.resize,Q.resize).on(O.keydown,s),J.on(O.touchStartClick,[G(N.overlay),G(N.close)].join(", "),e).on(O.move,C),M.gallery.active&&M.$boxer.on(O.touchStartClick,G(N.control),q),M.$boxer.on(O.transition,function(b){C(b),a(b.target).is(M.$boxer)&&(M.$boxer.off(O.transition),m?k(f):o?n(f):p?u(f):w?t(f):x?v(M.$object):a.error("BOXER: '"+f+"' is not valid."))}),J.addClass(N.isOpen),L||M.$boxer.triggerHandler(O.transition),x)return M.$boxer}}function e(b){C(b),"undefined"!=typeof M.$boxer&&(M.$boxer.on(O.transition,function(b){C(b),a(b.target).is(M.$boxer)&&(M.$boxer.off(O.transition),M.$overlay.remove(),M.$boxer.remove(),M={})}).addClass(N.isAnimating),J.removeClass(N.isOpen),L||M.$boxer.triggerHandler(O.transition),E(M.resizeTimer),I.off(G(H)),J.off(G(H)).removeClass(N.isOpen),M.gallery.active&&M.$boxer.off(G(H)),M.isMobile&&"image"===M.type&&M.gallery.active&&M.$container.off(G(H)),I.trigger(O.close))}function f(){{var b=i();M.isMobile?0:M.duration}M.isMobile||M.$controls.css({marginTop:(M.contentHeight-M.controlHeight-M.metaHeight)/2}),!M.visible&&M.isMobile&&M.gallery.active&&M.$content.on(O.start,G(N.image),y),(M.isMobile||M.fixed)&&J.addClass(N.isOpen),M.$boxer.on(O.transition,function(b){C(b),a(b.target).is(M.$boxer)&&(M.$boxer.off(O.transition),M.$container.on(O.transition,function(b){C(b),a(b.target).is(M.$container)&&(M.$container.off(O.transition),M.$boxer.removeClass(N.isAnimating),M.isAnimating=!1)}),M.$boxer.removeClass(N.isLoading),L||M.$content.triggerHandler(O.transition),M.visible=!0,M.callback.apply(M.$boxer),I.trigger(O.open),M.gallery.active&&p())}),M.isMobile||M.$boxer.css({height:M.contentHeight+M.paddingVertical,width:M.contentWidth+M.paddingHorizontal,top:M.fixed?0:b.top});var c=M.oldContentHeight!==M.contentHeight||M.oldContentWidth!==M.contentWidth;!M.isMobile&&L&&c||M.$boxer.triggerHandler(O.transition),M.oldContentHeight=M.contentHeight,M.oldContentWidth=M.contentWidth}function g(){if(M.visible&&!M.isMobile){var a=i();M.$controls.css({marginTop:(M.contentHeight-M.controlHeight-M.metaHeight)/2}),M.$boxer.css({height:M.contentHeight+M.paddingVertical,width:M.contentWidth+M.paddingHorizontal,top:M.fixed?0:a.top})}}function h(){var a=i();M.$boxer.css({top:M.fixed?0:a.top})}function i(){if(M.isMobile)return{left:0,top:0};var a={left:(I.width()-M.contentWidth-M.paddingHorizontal)/2,top:M.top<=0?(I.height()-M.contentHeight-M.paddingVertical)/2:M.top};return M.fixed!==!0&&(a.top+=I.scrollTop()),a}function j(a){var b=a.attr("title");return void 0!==b&&""!==b.trim()?'<p class="caption">'+b.trim()+"</p>":""}function k(b){M.$image=a("<img>"),M.$image.on(O.load,function(){M.$image.off(G(H));var a=B(M.$image);M.naturalHeight=a.naturalHeight,M.naturalWidth=a.naturalWidth,M.retina&&(M.naturalHeight/=2,M.naturalWidth/=2),M.$content.prepend(M.$image),""===M.$caption.html()?M.$caption.hide():M.$caption.show(),l(),f()}).error(x).attr("src",b).addClass(N.image),(M.$image[0].complete||4===M.$image[0].readyState)&&M.$image.triggerHandler(O.load)}function l(){var a=0;for(M.windowHeight=M.viewportHeight=I.height()-M.paddingVertical,M.windowWidth=M.viewportWidth=I.width()-M.paddingHorizontal,M.contentHeight=1/0,M.contentWidth=1/0,M.imageMarginTop=0,M.imageMarginLeft=0;M.contentHeight>M.viewportHeight&&2>a;)M.imageHeight=0===a?M.naturalHeight:M.$image.outerHeight(),M.imageWidth=0===a?M.naturalWidth:M.$image.outerWidth(),M.metaHeight=0===a?0:M.metaHeight,0===a&&(M.ratioHorizontal=M.imageHeight/M.imageWidth,M.ratioVertical=M.imageWidth/M.imageHeight,M.isWide=M.imageWidth>M.imageHeight),M.imageHeight<M.minHeight&&(M.minHeight=M.imageHeight),M.imageWidth<M.minWidth&&(M.minWidth=M.imageWidth),M.isMobile?(M.$meta.css({width:M.windowWidth}),M.metaHeight=M.$meta.outerHeight(!0),M.contentHeight=M.viewportHeight-M.paddingVertical,M.contentWidth=M.viewportWidth-M.paddingHorizontal,m(),M.imageMarginTop=(M.contentHeight-M.targetImageHeight-M.metaHeight)/2,M.imageMarginLeft=(M.contentWidth-M.targetImageWidth)/2):(0===a&&(M.viewportHeight-=M.margin+M.paddingVertical,M.viewportWidth-=M.margin+M.paddingHorizontal),M.viewportHeight-=M.metaHeight,m(),M.contentHeight=M.targetImageHeight,M.contentWidth=M.targetImageWidth),M.$meta.css({width:M.contentWidth}),M.$image.css({height:M.targetImageHeight,width:M.targetImageWidth,marginTop:M.imageMarginTop,marginLeft:M.imageMarginLeft}),M.isMobile||(M.metaHeight=M.$meta.outerHeight(!0),M.contentHeight+=M.metaHeight),a++}function m(){var a=M.isMobile?M.contentHeight-M.metaHeight:M.viewportHeight,b=M.isMobile?M.contentWidth:M.viewportWidth;M.isWide?(M.targetImageWidth=b,M.targetImageHeight=M.targetImageWidth*M.ratioHorizontal,M.targetImageHeight>a&&(M.targetImageHeight=a,M.targetImageWidth=M.targetImageHeight*M.ratioVertical)):(M.targetImageHeight=a,M.targetImageWidth=M.targetImageHeight*M.ratioVertical,M.targetImageWidth>b&&(M.targetImageWidth=b,M.targetImageHeight=M.targetImageWidth*M.ratioHorizontal)),(M.targetImageWidth>M.imageWidth||M.targetImageHeight>M.imageHeight)&&(M.targetImageHeight=M.imageHeight,M.targetImageWidth=M.imageWidth),(M.targetImageWidth<M.minWidth||M.targetImageHeight<M.minHeight)&&(M.targetImageWidth<M.minWidth?(M.targetImageWidth=M.minWidth,M.targetImageHeight=M.targetImageWidth*M.ratioHorizontal):(M.targetImageHeight=M.minHeight,M.targetImageWidth=M.targetImageHeight*M.ratioVertical))}function n(b){M.$videoWrapper=a('<div class="'+N.videoWrapper+'"></div>'),M.$video=a('<iframe class="'+N.video+'" seamless="seamless"></iframe>'),M.$video.attr("src",b).addClass(N.video).prependTo(M.$videoWrapper),M.$content.prepend(M.$videoWrapper),o(),f()}function o(){M.windowHeight=M.viewportHeight=M.contentHeight=I.height()-M.paddingVertical,M.windowWidth=M.viewportWidth=M.contentWidth=I.width()-M.paddingHorizontal,M.videoMarginTop=0,M.videoMarginLeft=0,M.isMobile?(M.$meta.css({width:M.windowWidth}),M.metaHeight=M.$meta.outerHeight(!0),M.viewportHeight-=M.metaHeight,M.targetVideoWidth=M.viewportWidth,M.targetVideoHeight=M.targetVideoWidth*M.videoRatio,M.targetVideoHeight>M.viewportHeight&&(M.targetVideoHeight=M.viewportHeight,M.targetVideoWidth=M.targetVideoHeight/M.videoRatio),M.videoMarginTop=(M.viewportHeight-M.targetVideoHeight)/2,M.videoMarginLeft=(M.viewportWidth-M.targetVideoWidth)/2):(M.viewportHeight=M.windowHeight-M.margin,M.viewportWidth=M.windowWidth-M.margin,M.targetVideoWidth=M.videoWidth>M.viewportWidth?M.viewportWidth:M.videoWidth,M.targetVideoWidth<M.minWidth&&(M.targetVideoWidth=M.minWidth),M.targetVideoHeight=M.targetVideoWidth*M.videoRatio,M.contentHeight=M.targetVideoHeight,M.contentWidth=M.targetVideoWidth),M.$meta.css({width:M.contentWidth}),M.$videoWrapper.css({height:M.targetVideoHeight,width:M.targetVideoWidth,marginTop:M.videoMarginTop,marginLeft:M.videoMarginLeft}),M.isMobile||(M.metaHeight=M.$meta.outerHeight(!0),M.contentHeight=M.targetVideoHeight+M.metaHeight)}function p(){var b="";M.gallery.index>0&&(b=M.gallery.$items.eq(M.gallery.index-1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">')),M.gallery.index<M.gallery.total&&(b=M.gallery.$items.eq(M.gallery.index+1).attr("href"),b.indexOf("youtube.com/embed")<0&&b.indexOf("player.vimeo.com/video")<0&&a('<img src="'+b+'">'))}function q(b){C(b);var c=a(this);M.isAnimating||c.hasClass("disabled")||(M.isAnimating=!0,M.gallery.index+=c.hasClass("next")?1:-1,M.gallery.index>M.gallery.total&&(M.gallery.index=M.gallery.total),M.gallery.index<0&&(M.gallery.index=0),M.$container.on(O.transition,function(b){if(C(b),a(b.target).is(M.$container)){M.$container.off(O.transition),"undefined"!=typeof M.$image&&M.$image.remove(),"undefined"!=typeof M.$videoWrapper&&M.$videoWrapper.remove(),M.$target=M.gallery.$items.eq(M.gallery.index),M.$caption.html(M.formatter.apply(J,[M.$target])),M.$position.find(N.positionCurrent).html(M.gallery.index+1);var c=M.$target.attr("href"),d=c.indexOf("youtube.com/embed")>-1||c.indexOf("player.vimeo.com/video")>-1;d?n(c):k(c),r()}}),M.$boxer.addClass([N.isLoading,N.isAnimating].join(" ")),L||M.$content.triggerHandler(O.transition))}function r(){M.$controls.removeClass(N.controlDisabled),0===M.gallery.index&&M.$controls.filter(N.controlPrevious).addClass(N.controlDisabled),M.gallery.index===M.gallery.total&&M.$controls.filter(N.controlNext).addClass(N.controlDisabled)}function s(a){!M.gallery.active||37!==a.keyCode&&39!==a.keyCode?27===a.keyCode&&M.$close.triggerHandler(O.click):(C(a),M.$controls.filter(37===a.keyCode?N.controlPrevious:N.controlNext).triggerHandler(O.click))}function t(b){var c=a(b).find("> :first-child").clone();v(c)}function u(b){b+=b.indexOf("?")>-1?"&"+P.requestKey+"=true":"?"+P.requestKey+"=true";var c=a('<iframe class="'+N.isIframe+'" src="'+b+'"></iframe>');v(c)}function v(a){M.$content.append(a),w(a),f()}function w(a){M.windowHeight=I.height()-M.paddingVertical,M.windowWidth=I.width()-M.paddingHorizontal,M.objectHeight=a.outerHeight(!0),M.objectWidth=a.outerWidth(!0),M.targetHeight=M.targetHeight||M.$target.data("boxer-height"),M.targetWidth=M.targetWidth||M.$target.data("boxer-width"),M.maxHeight=M.windowHeight<0?P.minHeight:M.windowHeight,M.isIframe=a.is("iframe"),M.objectMarginTop=0,M.objectMarginLeft=0,M.isMobile||(M.windowHeight-=M.margin,M.windowWidth-=M.margin),M.contentHeight=void 0!==M.targetHeight?M.targetHeight:M.isIframe||M.isMobile?M.windowHeight:M.objectHeight,M.contentWidth=void 0!==M.targetWidth?M.targetWidth:M.isIframe||M.isMobile?M.windowWidth:M.objectWidth,(M.isIframe||M.isObject)&&M.isMobile?(M.contentHeight=M.windowHeight,M.contentWidth=M.windowWidth):M.isObject&&(M.contentHeight=M.contentHeight>M.windowHeight?M.windowHeight:M.contentHeight,M.contentWidth=M.contentWidth>M.windowWidth?M.windowWidth:M.contentWidth)}function x(){var b=a('<div class="'+N.error+'"><p>Error Loading Resource</p></div>');M.type="element",M.$meta.remove(),M.$image.off(G(H)),v(b)}function y(a){if(C(a),E(M.touchTimer),!M.isAnimating){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;M.xStart=b?b.pageX:a.clientX,M.leftPosition=0,M.touchMax=1/0,M.touchMin=-1/0,M.edge=.25*M.contentWidth,0===M.gallery.index&&(M.touchMax=0),M.gallery.index===M.gallery.total&&(M.touchMin=0),M.$boxer.on(O.touchMove,z).one(O.touchEnd,A)}}function z(a){var b="undefined"!=typeof a.originalEvent.targetTouches?a.originalEvent.targetTouches[0]:null;M.delta=M.xStart-(b?b.pageX:a.clientX),M.delta>20&&C(a),M.canSwipe=!0;var c=-M.delta;c<M.touchMin&&(c=M.touchMin,M.canSwipe=!1),c>M.touchMax&&(c=M.touchMax,M.canSwipe=!1),M.$image.css({transform:"translate3D("+c+"px,0,0)"}),M.touchTimer=D(M.touchTimer,300,function(){A(a)})}function A(a){C(a),E(M.touchTimer),M.$boxer.off([O.touchMove,O.touchEnd].join("")),M.delta&&(M.$boxer.addClass(N.isAnimating),M.swipe=!1,M.canSwipe&&(M.delta>M.edge||M.delta<-M.edge)?(M.swipe=!0,M.$image.css(M.delta<=M.leftPosition?{transform:"translate3D("+M.contentWidth+"px,0,0)"}:{transform:"translate3D("+-M.contentWidth+"px,0,0)"})):M.$image.css({transform:"translate3D(0,0,0)"}),M.swipe&&M.$controls.filter(M.delta<=M.leftPosition?".previous":".next").triggerHandler(O.click),D(M.resetTimer,M.duration,function(){M.$boxer.removeClass(N.isAnimating)}))}function B(a){var b=a[0],c=new Image;return"undefined"!=typeof b.naturalHeight?{naturalHeight:b.naturalHeight,naturalWidth:b.naturalWidth}:"img"===b.tagName.toLowerCase()?(c.src=b.src,{naturalHeight:c.height,naturalWidth:c.width}):!1}function C(a){a.preventDefault&&(a.stopPropagation(),a.preventDefault())}function D(a,b,c){return E(a),setTimeout(c,b)}function E(a){a&&(clearTimeout(a),a=null)}function F(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},b=!1,c=document.createElement("div");for(var d in a)a.hasOwnProperty(d)&&d in c.style&&(b=a[d]);return b||(b="transitionend",L=!1),b+G(H)}function G(a){return"."+a}var H="boxer",I=null,J=null,K=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(b.navigator.userAgent||b.navigator.vendor||b.opera),L=!0,M={},N={overlay:"boxer-overlay",base:"boxer",close:"boxer-close",loading:"boxer-loading-icon",container:"boxer-container",content:"boxer-content",image:"boxer-image",video:"boxer-video",videoWrapper:"boxer-video-wrapper",meta:"boxer-meta",control:"boxer-control",controlPrevious:"boxer-control-previous",controlNext:"boxer-control-next",controlDisabled:"boxer-control-disabled",position:"boxer-position",positionCurrent:"boxer-position-current",positionTotal:"boxer-position-total",caption:"boxer-caption",captionGallery:"boxer-caption-gallery",error:"boxer-error",isLoading:"boxer-loading",isAnimating:"boxer-animating",isFixed:"boxer-fixed",isMobile:"boxer-mobile",isInline:"boxer-inline",isIframe:"boxer-iframe",isOpen:"boxer-open"},O={close:"close."+H,open:"open."+H,click:"click."+H,keydown:"keydown."+H,resize:"resize."+H,load:"load."+H,touchStartClick:"touchstart."+H+" click."+H,touchStart:"touchstart."+H,touchMove:"touchmove."+H,touchEnd:"touchend."+H},P={callback:a.noop,customClass:"",extensions:["jpg","sjpg","jpeg","png","gif"],fixed:!1,formatter:a.noop,labels:{close:"Close",count:"of",next:"Next",previous:"Previous"},margin:50,minHeight:100,minWidth:100,mobile:!1,opacity:.75,retina:!1,requestKey:"boxer",top:0,videoRatio:.5625,videoWidth:600},Q={close:function(){"undefined"!=typeof M.$boxer&&(M.$boxer.off(G(H)),M.$overlay.triggerHandler(O.click))},defaults:function(b){return P=a.extend(P,b||{}),a(this)},destroy:function(){return a(this).off(G(H))},resize:function(b){return"undefined"!=typeof M.$boxer&&("object"!=typeof b&&(M.targetHeight=arguments[0],M.targetWidth=arguments[1]),"element"===M.type?w(M.$content.find("> :first-child")):"image"===M.type?l():"video"===M.type&&o(),g()),a(this)}};a.fn[H]=function(a){return Q[a]?Q[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a[H]=function(c,e){return Q[c]?Q[c].apply(b,Array.prototype.slice.call(arguments,1)):c instanceof a?d.apply(b,[{data:a.extend({$object:c},P,e||{})}]):void 0}}(jQuery,window);